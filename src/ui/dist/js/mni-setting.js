let fadReady=null,sadReady=null,retryMs=1e3;function resetMinMax(t){let e=document.getElementById(t+"Unit"),i=e.options[e.selectedIndex].value,a=document.getElementById(t+"Duration");switch(i){case"day":a.setAttribute("min","1"),a.setAttribute("max","31");break;case"week":a.setAttribute("min","1"),a.setAttribute("max","52");break;case"month":a.setAttribute("min","1"),a.setAttribute("max","12");break;case"quarter":a.setAttribute("min","1"),a.setAttribute("max","4");break;case"year":a.setAttribute("min","1"),a.setAttribute("max","10");break;default:e.setAttribute("min","1"),e.setAttribute("max","99")}}function saveAdminData(){null!=sadReady&&clearTimeout(sadReady);let t=document.getElementById("historicalDuration"),e=document.getElementById("historicalUnit"),i=document.getElementById("predictedDuration"),a=document.getElementById("historicalUnit"),n=t.value,d=e.options[e.selectedIndex].value,r=i.value,l=a.options[a.selectedIndex].value,o={historical:{duration:toInteger(n),unit:d},predicted:{duration:toInteger(r),unit:l}};fetch(localStorage.getItem("mni.gatewayUrl")+"/admin/data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),keepalive:!0}).catch((t=>{notify(t)}))}function fetchAdminData(){null!=fadReady&&clearTimeout(fadReady),fetch(localStorage.getItem("mni.gatewayUrl")+"/admin/data",{method:"GET",headers:{Accept:"application/json"},keepalive:!0}).then((t=>{if(t.ok)return t.json()})).then((t=>{let e=3,i="month",a=1,n="week";null!=t.historical?.duration&&(e=t.historical.duration),null!=t.historical?.unit&&(i=t.historical.unit),null!=t.predicted?.duration&&(a=t.predicted.duration),null!=t.predicted?.unit&&(n=t.predicted.unit),document.getElementById("historicalDuration").value=e,document.getElementById("historicalUnit").value=i,document.getElementById("predictedDuration").value=a,document.getElementById("predictedUnit").value=n})).catch((t=>{notify(t)}))}try{resetMinMax("historical"),resetMinMax("predicted")}catch(t){notify(t)}try{fetchAdminData()}catch(t){notify(t)}