let fadReady=null,sadReady=null,retryMs=1e3;function resetMinMax(t){let e=document.getElementById(t+"Unit"),a=e.options[e.selectedIndex].value,i=document.getElementById(t+"Duration");switch(a){case"day":i.setAttribute("min","1"),i.setAttribute("max","31");break;case"week":i.setAttribute("min","1"),i.setAttribute("max","52");break;case"month":i.setAttribute("min","1"),i.setAttribute("max","12");break;case"quarter":i.setAttribute("min","1"),i.setAttribute("max","4");break;case"year":i.setAttribute("min","1"),i.setAttribute("max","10");break;default:e.setAttribute("min","1"),e.setAttribute("max","99")}}function saveAdminData(){null!=sadReady&&clearTimeout(sadReady);let t=document.getElementById("historicalDuration"),e=document.getElementById("historicalUnit"),a=document.getElementById("predictedDuration"),i=document.getElementById("historicalUnit"),n=t.value,d=e.options[e.selectedIndex].value,r=a.value,u=i.options[i.selectedIndex].value,o={historical:{duration:toInteger(n),unit:d},predicted:{duration:toInteger(r),unit:u}};fetch(localStorage.getItem("mni.gatewayUrl")+"/admin/data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),keepalive:!0}).then((t=>{t.ok||(sadReady=setTimeout(saveAdminData,retryMs))})).catch((t=>{sadReady=setTimeout(saveAdminData,retryMs)}))}function fetchAdminData(){null!=fadReady&&clearTimeout(fadReady),fetch(localStorage.getItem("mni.gatewayUrl")+"/admin/data",{method:"GET",headers:{Accept:"application/json"},keepalive:!0}).then((t=>{if(t.ok)return t.json();fadReady=setTimeout(fetchAdminData,retryMs)})).then((t=>{let e=3,a="month",i=1,n="week";null!=t.historical?.duration&&(e=t.historical.duration),null!=t.historical?.unit&&(a=t.historical.unit),null!=t.predicted?.duration&&(i=t.predicted.duration),null!=t.predicted?.unit&&(n=t.predicted.unit),document.getElementById("historicalDuration").value=e,document.getElementById("historicalUnit").value=a,document.getElementById("predictedDuration").value=i,document.getElementById("predictedUnit").value=n})).catch((t=>{fadReady=setTimeout(fetchAdminData,retryMs)}))}try{resetMinMax("historical"),resetMinMax("predicted")}catch(t){}try{fetchAdminData()}catch(t){fadReady=setTimeout(fetchAdminData,retryMs)}