var mmdReady=null,mmlReady=null,mniLicenseHost=null,mniLicenseDomain=null,mniLicenseStart=null,mniLicenseExpiry=null,mniAppShortName="MNI",mniAppIcon="/favicon.ico",mniAppNotificationIcon="/favicon.ico",mniAppName=null,mniAppVersion=null,mniAppBuild=null,mniCountryCode=null,mniUiUrl="",mniRootUrl="/",mniGatewayUrl=null,mniGatewayUrlIp=null,mniGatewayUrlDns=null,mniRetryMs=1e3,mniRefreshMs=6e4,mniReadinessAttempts=10;const countryCode=["ABW","AFG","AGO","AIA","ALB","AND","ARE","ARG","ARM","ASM","ATA","ATF","ATG","AUS","AUT","AZE","BDI","BEL","BEN","BES","BFA","BGD","BGR","BHR","BHS","BIH","BLM","BLR","BLZ","BMU","BOL","BRA","BRB","BRN","BTN","BWA","CAF","CAN","CHE","CHL","CHN","CIV","CMR","COD","COG","COK","COL","COM","CPV","CRI","CUB","CUW","CYM","CYP","CZE","DEU","DJI","DMA","DNK","DOM","DZA","ECU","EGY","ERI","ESP","EST","ETH","FIN","FJI","FLK","FRA","FRO","FSM","GAB","GBR","GEO","GGY","GHA","GIB","GIN","GLP","GMB","GNB","GNQ","GRC","GRD","GRL","GTM","GUF","GUM","GUY","HND","HRV","HTI","HUN","IDN","IMN","IND","IRL","IRN","IRQ","ISL","ISR","ITA","JAM","JOR","JPN","KAZ","KEN","KGZ","KHM","KIR","KNA","KOR","KWT","LAO","LBN","LBR","LBY","LCA","LIE","LKA","LSO","LTU","LUX","LVA","MAR","MCO","MDA","MDG","MDV","MEX","MHL","MKD","MLI","MLT","MMR","MNE","MNG","MNP","MOZ","MRT","MSR","MTQ","MUS","MWI","MYS","MYT","NAM","NCL","NER","NGA","NIC","NIU","NLD","NOR","NPL","NRU","NZL","OMN","PAK","PAN","PCN","PER","PHL","PLW","PNG","POL","PRK","PRT","PRY","PSE","PYF","QAT","REU","ROU","RUS","RWA","SAU","SDN","SEN","SGP","SHN","SLB","SLE","SLV","SMR","SOM","SRB","SSD","STP","SUR","SVK","SVN","SWE","SWZ","SYC","SYR","TCA","TCD","TGO","THA","TJK","TKL","TKM","TLS","TON","TTO","TUN","TUR","TUV","TWN","TZA","UGA","UKR","URY","USA","UZB","VAT","VCT","VEN","VGB","VIR","VNM","VUT","WLF","WSM","YEM","ZAF","ZMB","ZWE"];var sequence=(e,t)=>{0!=e.length&&e.shift().call(t,(()=>{sequence(e,t)}))};function mniMetadata(){try{null!=mmdReady&&clearTimeout(mmdReady),fetch("/mni/metadata",{method:"GET",headers:{Accept:"application/json"}}).then((e=>{if(e.ok)return e.json();mmdReady=setTimeout(mniMetadata,mniRetryMs)})).then((e=>{localStorage.setItem("mni.appName",e.name),localStorage.setItem("mni.appShortName",e.shortName),localStorage.setItem("mni.appIcon",e.icon),localStorage.setItem("mni.appNotificationIcon",e.notificatonIcon),localStorage.setItem("mni.appVersion",e.version),localStorage.setItem("mni.appBuild",e.build),localStorage.setItem("mni.country",e.country),localStorage.setItem("mni.rootUrl",e.rootUrl),localStorage.setItem("mni.gatewayUrl",e.gatewayUrl),localStorage.setItem("mni.gatewayUrlIp",e.gatewayUrlIp),localStorage.setItem("mni.gatewayUrlDns",e.gatewayUrlDns),localStorage.setItem("mni.retryMs",e.retryMs),localStorage.setItem("mni.refreshMs",e.refreshMs),localStorage.setItem("mni.readinessAttempts",e.readinessAttempts),localStorage.setItem("mni.",!0)})).catch((e=>{mmdReady=setTimeout(mniMetadata,mniRetryMs)})),mniAppName=localStorage.getItem("mni.appName"),mniAppShortName=localStorage.getItem("mni.appShortName"),mniAppIcon=localStorage.getItem("mni.appIcon"),mniAppNotificationIcon=localStorage.getItem("mni.appNotificationIcon"),mniAppVersion=localStorage.getItem("mni.appVersion"),mniAppBuild=localStorage.getItem("mni.appBuild"),mniCountryCode=localStorage.getItem("mni.country"),mniRootUrl=localStorage.getItem("mni.rootUrl"),mniGatewayUrl=localStorage.getItem("mni.gatewayUrl"),mniGatewayUrlIp=localStorage.getItem("mni.gatewayUrlIp"),mniGatewayUrlDns=localStorage.getItem("mni.gatewayUrlDns"),mniRetryMs=localStorage.getItem("mni.retryMs"),mniRefreshMs=localStorage.getItem("mni.refreshMs"),mniReadinessAttempts=localStorage.getItem("mni.readinessAttempts")}catch(e){mmdReady=setTimeout(mniMetadata,mniRetryMs)}}function mniLicense(){try{null!=mmlReady&&clearTimeout(mmlReady),fetch(localStorage.getItem("mni.gatewayUrl")+"/license",{method:"GET",headers:{Accept:"application/json"}}).then((e=>{if(e.ok)return e.json();mmlReady=setTimeout(mniLicense,mniRetryMs)})).then((e=>{localStorage.setItem("mni.license.host",e.host),localStorage.setItem("mni.license.domain",e.domain),localStorage.setItem("mni.license.start",e.start),localStorage.setItem("mni.license.expiry",e.expiry),localStorage.setItem("mni.license.",!0)})).catch((e=>{mmlReady=setTimeout(mniLicense,mniRetryMs)})),mniLicenseHost=localStorage.getItem("mni.license.host"),mniLicenseDomain=localStorage.getItem("mni.license.domain"),mniLicenseStart=localStorage.getItem("mni.license.start"),mniLicenseExpiry=localStorage.getItem("mni.license.expiry")}catch(e){mmlReady=setTimeout(mniLicense,mniRetryMs)}}function clearSessionStorage(){let e=localStorage.length;for(var t=0;t<e;t++)null!=localStorage.key(t)&&localStorage.key(t).startsWith("mni.")&&localStorage.removeItem(localStorage.key(t))}function dumpSessionStorage(){let e=localStorage.length;for(var t=0;t<e;t++)null!=localStorage.key(t)&&localStorage.key(t).startsWith("mni.")&&console.log(localStorage.key(t)+"="+localStorage.getItem(localStorage.key(t)))}function notify(e,t="MNI",n="/favicon.ico"){"Notification"in window?"granted"===Notification.permission?new Notification(t,{body:e,icon:n}):"denied"!==Notification.permission&&Notification.requestPermission().then((e=>{"granted"===e&&new Notification("Permission request",{body:"Requesting permission to send notifications while using MNI",icon:"/favicon.ico"})})):console.log("Browser does not support notifications.")}function jump(e){return window.location=e,!1}function menuJump(e){return window.location=localStorage.getItem("mni.rootUrl")+"/"+e,!1}function logout(){try{mniUiUrl=localStorage.getItem("mni.uiUrl")}catch(e){mniUiUrl="/"}window.location.replace(mniUiUrl)}function loadScript(e,t,n="mapRender"){if(void 0===document.getElementById(n)||null==document.getElementById(n)){let o=document.createElement("script");o.setAttribute("id",n),o.setAttribute("src",e),o.onload=t(),document.head.appendChild(o)}}function togglePassword(e="password"){var t=document.getElementById(e);"password"===t.type?t.type="text":t.type="password"}function generateUUID(){var e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var o=16*Math.random();return e>0?(o=(e+o)%16|0,e=Math.floor(e/16)):(o=(t+o)%16|0,t=Math.floor(t/16)),("x"===n?o:3&o|8).toString(16)}))}function toggleDiv(e){let t=document.getElementById(e);t.style.display="none"==t.style.display?"block":"none"}function toPercent(e,t){let n=0;try{return t>0&&(n=Number.parseFloat(e/t*100).toFixed(0)),n}catch(e){return 0}}function toInteger(e){return Number.isNaN(Number.parseInt(e,10))?0:Number.parseInt(e,10)}function countryListPopulate(){let e=localStorage.getItem("mni.country");fetch(localStorage.getItem("mni.gatewayUrl")+"/ui/countries",{method:"GET",headers:{Accept:"application/json"},keepalive:!0}).then((e=>{if(e.ok)return e.json()})).then((t=>{if(t.length>0&&countryCode.length>0){let n="";for(let o=0;o<countryCode.length;o++){let a="'>";countryCode[o]==e&&(a="' selected='selected'>");let i=" disabled";(t.includes(countryCode[o])||countryCode[o]==e)&&(i=" "),n+="<option"+i+" value='"+countryCode[o]+a+countryCode[o]+"</option>"}document.getElementById("country").innerHTML=n}else document.getElementById("country").innerHTML="<option value='"+e+"' selected='selected'>"+e+"</option>"})).catch((e=>{notify(e)}))}try{localStorage.getItem("mni.")||mniMetadata()}catch(e){mmdReady=setTimeout(mniMetadata,mniRetryMs)}try{localStorage.getItem("mni.license.")||mniLicense()}catch(e){mmlReady=setTimeout(mniLicense,mniRetryMs)}