var mmdReady=null,mmlReady=null,mniLicenseHost=null,mniLicenseDomain=null,mniLicenseStart=null,mniLicenseExpiry=null,mniAppShortName="MNI",mniAppIcon="/favicon.ico",mniAppNotificationIcon="/favicon.ico",mniAppName=null,mniAppVersion=null,mniAppBuild=null,mniRootUrl="/",mniGatewayUrl=null,mniGatewayUrlIp=null,mniGatewayUrlDns=null,mniRetryMs=1e3,mniRefreshMs=6e4,mniReadinessAttempts=10;function mniMetadata(){try{null!=mmdReady&&clearTimeout(mmdReady),fetch("/mni/metadata",{method:"GET",headers:{Accept:"application/json"}}).then((e=>{if(e.ok)return e.json();mmdReady=setTimeout(mniMetadata,mniRetryMs)})).then((e=>{localStorage.setItem("mni.appName",e.name),localStorage.setItem("mni.appShortName",e.shortName),localStorage.setItem("mni.appIcon",e.icon),localStorage.setItem("mni.appNotificationIcon",e.notificatonIcon),localStorage.setItem("mni.appVersion",e.version),localStorage.setItem("mni.appBuild",e.build),localStorage.setItem("mni.rootUrl",e.rootUrl),localStorage.setItem("mni.gatewayUrl",e.gatewayUrl),localStorage.setItem("mni.gatewayUrlIp",e.gatewayUrlIp),localStorage.setItem("mni.gatewayUrlDns",e.gatewayUrlDns),localStorage.setItem("mni.retryMs",e.retryMs),localStorage.setItem("mni.refreshMs",e.refreshMs),localStorage.setItem("mni.readinessAttempts",e.readinessAttempts),localStorage.setItem("mni.",!0)})).catch((e=>{mmdReady=setTimeout(mniMetadata,mniRetryMs)})),mniAppName=localStorage.getItem("mni.appName"),mniAppShortName=localStorage.getItem("mni.appShortName"),mniAppIcon=localStorage.getItem("mni.appIcon"),mniAppNotificationIcon=localStorage.getItem("mni.appNotificationIcon"),mniAppVersion=localStorage.getItem("mni.appVersion"),mniAppBuild=localStorage.getItem("mni.appBuild"),mniRootUrl=localStorage.getItem("mni.rootUrl"),mniGatewayUrl=localStorage.getItem("mni.gatewayUrl"),mniGatewayUrlIp=localStorage.getItem("mni.gatewayUrlIp"),mniGatewayUrlDns=localStorage.getItem("mni.gatewayUrlDns"),mniRetryMs=localStorage.getItem("mni.retryMs"),mniRefreshMs=localStorage.getItem("mni.refreshMs"),mniReadinessAttempts=localStorage.getItem("mni.readinessAttempts")}catch(e){mmdReady=setTimeout(mniMetadata,mniRetryMs)}}function mniLicense(){try{null!=mmlReady&&clearTimeout(mmlReady),fetch(localStorage.getItem("mni.gatewayUrl")+"/license",{method:"GET",headers:{Accept:"application/json"}}).then((e=>{if(e.ok)return e.json();mmlReady=setTimeout(mniLicense,mniRetryMs)})).then((e=>{localStorage.setItem("mni.license.host",e.host),localStorage.setItem("mni.license.domain",e.domain),localStorage.setItem("mni.license.start",e.start),localStorage.setItem("mni.license.expiry",e.expiry),localStorage.setItem("mni.license.",!0)})).catch((e=>{mmlReady=setTimeout(mniLicense,mniRetryMs)})),mniLicenseHost=localStorage.getItem("mni.license.host"),mniLicenseDomain=localStorage.getItem("mni.license.domain"),mniLicenseStart=localStorage.getItem("mni.license.start"),mniLicenseExpiry=localStorage.getItem("mni.license.expiry")}catch(e){mmlReady=setTimeout(mniLicense,mniRetryMs)}}function clearSessionStorage(){let e=localStorage.length;for(var t=0;t<e;t++){let e=localStorage.key(t);e.startsWith("mni.")&&localStorage.removeItem(e)}}function dumpSessionStorage(){let e=localStorage.length;for(var t=0;t<e;t++){let e=localStorage.key(t);e.startsWith("mni.")&&console.log(e+"="+localStorage.getItem(e))}}function notify(e,t="MNI",n="/favicon.ico"){"Notification"in window?"granted"===Notification.permission?new Notification(t,{body:e,icon:n}):"denied"!==Notification.permission&&Notification.requestPermission().then((e=>{"granted"===e&&new Notification("Permission request",{body:"Requesting permission to send notifications while using MNI",icon:"/favicon.ico"})})):console.log("Browser does not support notifications.")}function jump(e){return window.location=e,!1}function menuJump(e){return window.location=localStorage.getItem("mni.rootUrl")+"/"+e,!1}function logout(){clearSessionStorage(),window.location.replace("/")}function loadScript(e,t,n="mapRender"){if(void 0===document.getElementById(n)||null==document.getElementById(n)){let o=document.createElement("script");o.setAttribute("id",n),o.setAttribute("src",e),o.onload=t(),document.head.appendChild(o)}}function togglePassword(e="password"){var t=document.getElementById(e);"password"===t.type?t.type="text":t.type="password"}function generateUUID(){var e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var o=16*Math.random();return e>0?(o=(e+o)%16|0,e=Math.floor(e/16)):(o=(t+o)%16|0,t=Math.floor(t/16)),("x"===n?o:3&o|8).toString(16)}))}function toggleDiv(e){let t=document.getElementById(e);t.style.display="none"==t.style.display?"block":"none"}function toPercent(e,t){let n=0;try{return t>0&&(n=Number.parseFloat(e/t*100).toFixed(0)),n}catch(e){return 0}}function toInteger(e){return Number.isNaN(Number.parseInt(e,10))?0:Number.parseInt(e,10)}try{localStorage.getItem("mni.")||mniMetadata()}catch(e){mmdReady=setTimeout(mniMetadata,mniRetryMs)}try{localStorage.getItem("mni.license.")||mniLicense()}catch(e){mmlReady=setTimeout(mniLicense,mniRetryMs)}