var mmdReady=null,mniAppShortName="MNI",mniAppIcon="/favicon.ico",mniAppNotificationIcon="/favicon.ico",mniAppName=null,mniAppVersion=null,mniAppBuild=null,mniRootUrl="/",mniGatewayUrl=null,mniGatewayUrlIp=null,mniGatewayUrlDns=null,mniRetryMs=1e3,mniRefreshMs=6e4,mniReadinessAttempts=10;function mniMetadata(){try{null!=mmdReady&&clearTimeout(mmdReady),fetch("/mni/metadata",{method:"GET",headers:{Accept:"application/json"}}).then((e=>{if(e.ok)return e.json();mmdReady=setTimeout(mniMetadata,mniRetryMs)})).then((e=>{localStorage.setItem("mni.appName",e.name),localStorage.setItem("mni.appShortName",e.shortName),localStorage.setItem("mni.appIcon",e.icon),localStorage.setItem("mni.appNotificationIcon",e.notificatonIcon),localStorage.setItem("mni.appVersion",e.version),localStorage.setItem("mni.appBuild",e.build),localStorage.setItem("mni.rootUrl",e.rootUrl),localStorage.setItem("mni.gatewayUrl",e.gatewayUrl),localStorage.setItem("mni.gatewayUrlIp",e.gatewayUrlIp),localStorage.setItem("mni.gatewayUrlDns",e.gatewayUrlDns),localStorage.setItem("mni.retryMs",e.retryMs),localStorage.setItem("mni.refreshMs",e.refreshMs),localStorage.setItem("mni.readinessAttempts",e.readinessAttempts),localStorage.setItem("mni.",!0)})).catch((e=>{mmdReady=setTimeout(mniMetadata,mniRetryMs)})),mniAppName=localStorage.getItem("mni.appName"),mniAppShortName=localStorage.getItem("mni.appShortName"),mniAppIcon=localStorage.getItem("mni.appIcon"),mniAppNotificationIcon=localStorage.getItem("mni.appNotificationIcon"),mniAppVersion=localStorage.getItem("mni.appVersion"),mniAppBuild=localStorage.getItem("mni.appBuild"),mniRootUrl=localStorage.getItem("mni.rootUrl"),mniGatewayUrl=localStorage.getItem("mni.gatewayUrl"),mniGatewayUrlIp=localStorage.getItem("mni.gatewayUrlIp"),mniGatewayUrlDns=localStorage.getItem("mni.gatewayUrlDns"),mniRetryMs=localStorage.getItem("mni.retryMs"),mniRefreshMs=localStorage.getItem("mni.refreshMs"),mniReadinessAttempts=localStorage.getItem("mni.readinessAttempts")}catch(e){mmdReady=setTimeout(mniMetadata,mniRetryMs)}}function clearSessionStorage(){localStorage.removeItem("mni.gatewayUrlDns"),localStorage.removeItem("mni.appIcon"),localStorage.removeItem("mni.appBuild"),localStorage.removeItem("mni.appNotificationIcon"),localStorage.removeItem("mni.retryMs"),localStorage.removeItem("mni.readinessAttempts"),localStorage.removeItem("mni.rootUrl"),localStorage.removeItem("mni.gatewayUrl"),localStorage.removeItem("mni.gatewayUrlIp"),localStorage.removeItem("mni.gatewayUrlDns"),localStorage.removeItem("mni.appName"),localStorage.removeItem("mni.appShortName"),localStorage.removeItem("mni.appVersion"),localStorage.removeItem("mni.refreshMs"),localStorage.removeItem("mni.")}function dumpSessionStorage(){let e=localStorage.length;for(var t=0;t<e;t++){let e=localStorage.key(t);e.startsWith("mni.")&&console.log(e+"="+localStorage.getItem(e))}}function notify(e,t="MNI",o="/favicon.ico"){"Notification"in window?"granted"===Notification.permission?new Notification(t,{body:e,icon:o}):"denied"!==Notification.permission&&Notification.requestPermission().then((e=>{"granted"===e&&new Notification("Permission request",{body:"Requesting permission to send notifications while using MNI",icon:"/favicon.ico"})})):console.log("Browser does not support notifications.")}function jump(e){return window.location=e,!1}function menuJump(e){return window.location=localStorage.getItem("mni.rootUrl")+"/"+e,!1}function logout(){clearSessionStorage(),window.location.replace("/")}function loadScript(e,t,o="mapRender"){if(void 0===document.getElementById(o)||null==document.getElementById(o)){let a=document.createElement("script");a.setAttribute("id",o),a.setAttribute("src",e),a.onload=t(),document.head.appendChild(a)}}function togglePassword(e="password"){var t=document.getElementById(e);"password"===t.type?t.type="text":t.type="password"}function generateUUID(){var e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(o){var a=16*Math.random();return e>0?(a=(e+a)%16|0,e=Math.floor(e/16)):(a=(t+a)%16|0,t=Math.floor(t/16)),("x"===o?a:3&a|8).toString(16)}))}function toggleDiv(e){let t=document.getElementById(e);t.style.display="none"==t.style.display?"block":"none"}function toPercent(e,t){let o=0;try{return t>0&&(o=Number.parseFloat(e/t*100).toFixed(0)),o}catch(e){return 0}}function toInteger(e){return Number.isNaN(Number.parseInt(e,10))?0:Number.parseInt(e,10)}try{localStorage.getItem("mni.")||mniMetadata()}catch(e){mmdReady=setTimeout(mniMetadata,mniRetryMs)}